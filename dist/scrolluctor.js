(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};function e(t,e=document.body){return function t(s,i=0,r=0){return!!s&&(s===e?{left:i,top:r}:t(s.offsetParent,i+s.offsetLeft,r+s.offsetTop))}(t)}t.d({},{Y:()=>l});class s{constructor(t){var e,i,r,n,o;if(this.splitted=!1,this.progress=-1,this.adapters=new Set,this.elements=new Set,this.value=0,this.start=0,this.end=0,this.startOriginal="",this.endOriginal="",this.active=!1,this.group=!1,this.deactivating=!1,this.custom=null!==(e=t.custom)&&void 0!==e&&e,!t.id)throw new Error('"id" of driver is undefined');if(!this.custom&&!t.domElement)throw new Error(`"domElement" of driver "${t.id}" is undefined.`);if(this.id=t.id,this.custom){if(!t.trackedValueProvider)throw new Error(`"trackedValueProvider" is not set on custom driver "${this.id}".`);this.trackedValueProvider=()=>t.trackedValueProvider(this)}else this.domElement=t.domElement;if(this.data=null!==(i=t.data)&&void 0!==i?i:{},this.events=null!==(r=t.events)&&void 0!==r?r:{},this.edges=null!==(n=t.edges)&&void 0!==n?n:["bottom","bottom"],this.inertiaSpeed=null!==(o=t.inertiaSpeed)&&void 0!==o?o:l.options.inertiaSpeed,this.custom&&(!("start"in t)||!("end"in t)))throw new Error(`"start" and "end" are not provided for custom driver "${this.id}".`);this.custom&&(this.startOriginal=t.start,this.endOriginal=t.end),t.group&&(this.group=t.group),s.instances.set(this.id,this),this.events.onInit&&this.events.onInit(this)}updateLimits(){this.events.onBeforeUpdateLimits&&this.events.onBeforeUpdateLimits(this),this.custom?(this.start=Function("driver","return "+this.startOriginal)(this),this.end=Function("driver","return "+this.endOriginal)(this)):(this.start=e(this.domElement).top,this.end=this.splitted?e(this.endDomElement).top:this.start+this.domElement.offsetHeight,"bottom"===this.edges[0]&&(this.start-=l.height),"bottom"===this.edges[1]&&(this.end-=l.height),this.end<this.start&&(this.end+=l.height)),this.events.onAfterUpdateLimits&&this.events.onAfterUpdateLimits(this)}updateProgress(){let t=(this.value-this.start)/(this.end-this.start);if(t=t<0?0:t>1?1:parseFloat(t.toFixed(4)),this.inertiaSpeed&&l.rafActive){let e=(t-this.progress)*(.1*this.inertiaSpeed);if(Math.abs(e)<=1e-4*this.inertiaSpeed&&(e=0),e)return void(this.progress+=e)}this.progress=t,!this.deactivating||0!==this.progress&&1!==this.progress||this.deactivate()}render(){this.value=this.custom?this.trackedValueProvider():l.scroll;const t=this.progress;if(this.updateProgress(),t!==this.progress||!l.rafActive||this.group){this.events.onBeforeRender&&this.events.onBeforeRender(this);for(let t of this.adapters)t.render(this.progress);for(let t of this.elements)t.render();this.events.onAfterRender&&this.events.onAfterRender(this)}}activate(){this.active||(this.active=!0,this.deactivating=!1,s.activeInstances.set(this.id,this))}deactivate(){this.active&&(this.active=!1,this.deactivating=!1,s.activeInstances.delete(this.id))}static init(t){for(let e in t){const i=t[e];i.id=e;const r=new this(i);i.group&&(s.groups[i.group]||(s.groups[i.group]=[]),s.groups[i.group].push(r))}}static initSplitted(){document.querySelectorAll(`${l.options.driverSelector}[data-group][data-type="end"]`).forEach((t=>{const e=t.dataset.group,i=document.querySelector(`${l.options.driverSelector}[data-group="${e}"][data-type="start"]`);if(!i)throw new Error(`Element with data-type="start" and data-group="${e}" is undefined.`);const r=i.dataset[l.options.datasetId];t.dataset.id=r;const n=s.instances.get(r);n.splitted=!0,n.endDomElement=t}))}static updateLimits(){const t=s.instances.values();for(let e of t)e.updateLimits()}static manageGroups(){for(let t in s.groups){const e=s.groups[t];let i=0;for(let t=0,s=e.length;t<s;t++)1===e[t].progress&&(i=t);s.groups[t][i].activate()}}static render(t=!0){const e=t?s.activeInstances.values():s.instances.values();for(let t of e)t.render()}}s.instances=new Map,s.activeInstances=new Map,s.groups={};class i{constructor(t){var e,r,n;if(this.start=-1,this.end=-1,this.elements=new Set,this.startOriginal="",this.endOriginal="",this.value="",this.limitsType="clean",!t.id)throw new Error('"id" of adapter is undefined.');if(!t.driverId)throw new Error(`Property "driverId" is missing (called in adapter "${t.id}" constructor).`);if(!s.instances.has(t.driverId))throw new Error(`Driver "${t.driverId}" doesn't exist (called in adapter "${t.id}" constructor).`);if(this.id=t.id,!t.cssProperty)throw new Error(`"cssProperty" of adapter "${this.id}" is not defined.`);if(!("start"in t)||void 0===t.start)throw new Error(`"start" of adapter "${this.id}" is not defined.`);if(!("end"in t)||void 0===t.end)throw new Error(`"end" of adapter "${this.id}" is not defined.`);this.cssProperty=t.cssProperty;const{unit:o,toFixed:a}=function(t){let e="",s=2;t.indexOf("translate")>-1&&(e="px",s=1);return{unit:e,toFixed:s}}(this.cssProperty);this.unit=null!==(e=t.unit)&&void 0!==e?e:o,this.toFixed=a,this.start=t.start,this.end=t.end,"string"!=typeof this.start&&"string"!=typeof this.end||(this.startOriginal=this.start.toString(),this.endOriginal=this.end.toString(),this.startOriginal.indexOf("element")>-1||this.endOriginal.indexOf("element")>-1?this.limitsType="element":this.limitsType="adapter"),this.data=null!==(r=t.data)&&void 0!==r?r:{},this.events=null!==(n=t.events)&&void 0!==n?n:{},this.driver=s.instances.get(t.driverId),this.driver.adapters.add(this),i.instances.set(this.id,this)}render(t){this.events.onBeforeRender&&this.events.onBeforeRender(this),"element"!==this.limitsType&&(this.value=this.generateValue(t,this.start,this.end));for(let e of this.elements){const s={name:this.cssProperty,value:this.value};if("element"===this.limitsType){const{start:i,end:r}=this.generateLimits(this.startOriginal,this.endOriginal,e);s.value=this.generateValue(t,i,r)}e.addProperty(s)}this.events.onAfterRender&&this.events.onAfterRender(this)}generateLimits(t,e,s){if(t=Function("element","return "+t)(s),e=Function("element","return "+e)(s),"number"!=typeof t)throw new Error(`"start" of adapter "${this.id}" must be a type of "number".`);if("number"!=typeof e)throw new Error(`"end" of adapter "${this.id}" must be a type of "number".`);return{start:t,end:e}}generateValue(t,e,s){return(t*(s-e)+e).toFixed(this.toFixed)+this.unit}static init(t){for(let e in t)t[e].id=e,new this(t[e])}static updateLimits(){const t=i.instances.values();for(let e of t)if("adapter"===e.limitsType){const{start:t,end:s}=e.generateLimits(e.startOriginal,e.endOriginal);e.start=t,e.end=s}}}i.instances=new Map;const r=["perspective","scaleX","scaleY","scale","skewX","skewY","skew","rotateX","rotateY","rotate"],n=["translateX","translateY","translateZ"];class o{constructor(t){var e,s;if(this.width=0,this.height=0,this.properties={},this.adapters=new Set,!t.id)throw new Error('"id" of element is undefined');if(!t.adaptersId||0===t.adaptersId.length)throw new Error(`"adaptersId" of element "${t.id}" can't be empty or undefined.`);if(!t.domElement)throw new Error(`"domElement" of element "${t.id}" is undefined.`);this.id=t.id,this.domElement=t.domElement,this.data=null!==(e=t.data)&&void 0!==e?e:{},this.events=null!==(s=t.events)&&void 0!==s?s:{},t.adaptersId.forEach((t=>{this.adapters.add(i.instances.get(t))}));for(let t of this.adapters)t.elements.add(this),t.driver.elements.add(this);o.instances.set(this.id,this)}addProperty(t){this.properties[t.name]=t.value}render(){this.events.onBeforeRender&&this.events.onBeforeRender(this);const t={transform:""},e={translateX:0,translateY:0,translateZ:0};let s=!1;for(let i in this.properties){const o=this.properties[i];n.includes(i)?(e[i]=o,s=!0):"scale"===i?t.transform+=`scale3d(${o}, ${o}, ${o}) `:r.includes(i)?t.transform+=`${i}(${o}) `:t[i]=o+" "}s&&(t.transform+=`translate3d(${e.translateX}, ${e.translateY}, ${e.translateZ})`);for(let e in t)this.domElement.style.setProperty(e,t[e]);console.log("element rendering"),this.events.onAfterRender&&this.events.onAfterRender(this)}updateSizes(){this.width=this.domElement.clientWidth,this.height=this.domElement.clientHeight}static init(t){for(let e in t)t[e].id=e,new this(t[e])}static updateSizes(){const t=o.instances.values();for(let e of t)e.updateSizes()}}function a(){const t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||"");return{left:t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft,top:t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop}}function d(t){const e=Math.random().toString(36).substring(2);return t.has(e)?d(t):e}o.instances=new Map;const l={Driver:s,Adapter:i,Element:o,scroll:-1,width:-1,height:-1,rafId:-1,rafActive:!1,driversDomElements:undefined,events:{},options:{driverSelector:".scrolluctor-driver",datasetId:"id",inertiaSpeed:.5,updateScroll:!0,dimensionsProvider:()=>({width:document.body.clientWidth,height:window.innerHeight})},init(t={}){if(t.events&&(l.events=t.events),t.options)for(let e in t.options)l.options[e]=t.options[e];l.driversDomElements=document.querySelectorAll(l.options.driverSelector),l.initInstances(t),l.driversDomElements.forEach((t=>{f.observe(t)})),l.recalculateDom(),l.rafActive=!0,l.render(),window.addEventListener("resize",p),console.log("drivers",l.Driver.instances),console.log("adapters",l.Adapter.instances),console.log("elements",l.Element.instances)},unInit(){s.instances.clear(),s.activeInstances.clear(),i.instances.clear(),o.instances.clear(),window.removeEventListener("resize",p),l.driversDomElements.forEach((t=>{f.unobserve(t)}))},render(){l.rafActive&&(console.log(s.activeInstances.size),l.events.onBeforeRender&&l.events.onBeforeRender(),l.options.updateScroll&&(l.scroll=a().top),s.render(),l.events.onAfterRender&&l.events.onAfterRender(),l.rafId=requestAnimationFrame(l.render))},recalculateDom(){const{width:t,height:e}=l.options.dimensionsProvider();l.width=t,l.height=e,l.scroll=a().top,l.events.onBeforeRecalculateDom&&l.events.onBeforeRecalculateDom(),s.updateLimits(),i.updateLimits(),o.updateSizes(),s.render(!1),s.manageGroups(),l.events.onAfterRecalculateDom&&l.events.onAfterRecalculateDom()},initInstances(t={}){var e,r,n,a;const c={drivers:null!==(e=t.drivers)&&void 0!==e?e:{},adapters:null!==(r=t.adapters)&&void 0!==r?r:{},elements:null!==(n=t.elements)&&void 0!==n?n:{}};l.driversDomElements.forEach((t=>{var e,r;if(!t.dataset.type||"start"===t.dataset.type){const n=null!==(e=t.dataset[l.options.datasetId])&&void 0!==e?e:d(s.instances);if(t.dataset[l.options.datasetId]=n,c.drivers[n]||(c.drivers[n]={}),c.drivers[n].domElement=t,t.dataset.group&&(c.drivers[n].group=t.dataset.group),t.dataset.adapters){const e=JSON.parse(t.dataset.adapters);for(let t in e){const s=e[t],o=null!==(r=s.id)&&void 0!==r?r:d(i.instances);s.driverId=n,s.cssProperty=t,h({[o]:s},c.adapters)}}}}));for(let t in c.adapters)null===(a=c.adapters[t].elements)||void 0===a||a.forEach((e=>{document.querySelectorAll(e).forEach((e=>{let s=e.dataset[l.options.datasetId];s||(s=d(o.instances),e.dataset[l.options.datasetId]=s),s in c.elements?(c.elements[s].adaptersId||(c.elements[s].adaptersId=[]),c.elements[s].adaptersId.push(t),c.elements[s].domElement=e):c.elements[s]={id:s,adaptersId:[t],domElement:e}}))}));s.init(c.drivers),s.initSplitted(),i.init(c.adapters),o.init(c.elements)}};function h(t,e){if(t)for(let s in t){const i=t[s];if(s in e)for(let t in i)e[s][t]=i[t];else e[s]=i}}const c=function(t){let e;return(...s)=>{clearTimeout(e),e=setTimeout((()=>{t.apply(this,s)}),300)}}((()=>{l.recalculateDom(),l.rafActive=!0,l.render(),l.events.onAfterResize&&l.events.onAfterResize()})),p=()=>{l.events.onBeforeResize&&l.events.onBeforeResize(),cancelAnimationFrame(l.rafId),l.rafActive=!1,c()};let u=a().top;const f=new IntersectionObserver((t=>{let e=!0;l.scroll<u&&(e=!1),u=l.scroll,t.forEach((t=>{let i=!1;t.target.dataset.group&&"end"===t.target.dataset.type&&(i=!0);const r=s.instances.get(t.target.dataset.id);r&&(i?e?r.deactivating=!0:r.activate():t.isIntersecting?r.activate():r.deactivating=!0)}))}));window.Scrolluctor=l})();